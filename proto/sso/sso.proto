// Версия ProtoBuf
syntax = "proto3";

// Текущий пакет - указывает пространство имен для сервисов
package auth;

// Настройки генерации кода Go
option go_package = "github.com/nestjest/auth_microservice_contract/gen/go/sso;sso";

// Auth is service for managin permissons and roles.
service Auth {
  // Register registers a new user.
  rpc Register (RegisterRequest) returns (RegisterResponse);

  // Login logs in a user and returns an auth token.
  rpc Login (LoginRequest) returns (LoginResponse);
}

// TODO: Следующий сервис можно описать прямо тут
// либо вынести в отдельный файл
// service Permissions {
// GetUserPermissions(GetUserPermissionsRequest)
// return UserPermissons
//}

// Обьект, который отправляется при вызове RPC-метода.
message RegisterRequest{
  string email = 1;
  string password = 2;
}

// Обьект который возвращает метод.
message RegisterResponse {
  int64 user_id = 1;
}

// Тоже самое для Login().
message LoginRequest {
  string email = 1; // Email of the user to login.
  string password = 2; // Password of the user to login.
  int32 app_id = 3; // ID of the user to login.
}

message LoginResponse {
  string token = 1; // Auth token of the logged in user.
}